<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قفزة الزمن - الملف الشخصي</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <header>
        <button id="back-to-menu">العودة</button>
        <h1>ملفي الشخصي</h1>
    </header>
    
    <main class="profile-container">
        <div class="player-info">
            <img src="assets/avatar-default.png" id="player-avatar" alt="الصورة الشخصية">
            <h2 id="player-name">لاعب جديد</h2>
            <div class="stats">
                <div class="stat">
                    <span>الدرجة الأعلى</span>
                    <strong id="best-score">0</strong>
                </div>
                <div class="stat">
                    <span>الكريستالات</span>
                    <strong id="crystals">0</strong>
                </div>
            </div>
        </div>
        
        <div class="achievements-section">
            <h3>الإنجازات</h3>
            <div id="achievements-list"></div>
        </div>
    </main>
    
    <script type="module" src="js/api-client.js"></script>
    <script type="module" src="js/achievements.js"></script>
    <script type="module">
        import { getPlayerProfile, updatePlayerName } from './js/api-client.js';
        import { loadAchievements } from './js/achievements.js';

        document.getElementById('back-to-menu').addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        async function loadProfile() {
            try {
                const profile = await getPlayerProfile();
                document.getElementById('player-name').textContent = profile.name;
                document.getElementById('best-score').textContent = 
                    profile.bestScore.toLocaleString();
                document.getElementById('crystals').textContent = 
                    profile.crystals.toLocaleString();
                
                if (profile.avatar) {
                    document.getElementById('player-avatar').src = profile.avatar;
                }
                
                loadAchievements(profile.achievements);
            } catch (error) {
                console.error('Error loading profile:', error);
            }
        }

        loadProfile();
    </script>
</body>
</html>
